task clean {
    doFirst {
        println "Clean task"
    }
}

task compile {
    doFirst {
        println "Compile task"
    }
}

task build {
    doLast {
        println "Build task"
    }
}

build.dependsOn "compile"
compile.dependsOn "clean"
compile.mustRunAfter "clean"
